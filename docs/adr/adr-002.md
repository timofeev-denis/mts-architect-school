# ADR.002 Выбор шаблона интеграции 

* Статус: Предложено
* Владелец: denis.timоfeev@mts.ru

## Контекст
Для нужд рассылки уведомлений по электронной почте [FR.005](../README.md#функциональные-требования) в Системе планируется использовать внешний SMTP-сервер. Необходимо определить способ интеграции с ним.

## Варианты решения

### Вариант 1. Синхнонное обращение
Синхнонное обращение к SMTP-серверу из приложения при выполнении пользователем операции, которая должна повлечь отправку уведомлений.
* **Критерии сравнения**
  * Трудозатраты на реализацию: 24 ч/часов.
  * Потребление RAM: ~9 МБ.
  * Отзывчивость UI при отправке большого количества уведомлеий: низкая.

### Вариант 2. Асинхнонное обращение
Реализация обращений к SMTP-серверу в рамках отдельного приложения - notificator. Основное приложение будет обращаться к notificator в асинхронном режиме.
* **Критерии сравнения**
  * Трудозатраты на реализацию: 80 ч/часов.
  * Потребление RAM: ~230 МБ.
  * Отзывчивость UI при отправке большого количества уведомлеий: высокая.

## Решение
Мы реализуем отдельное приложение notificator, поскольку нам важен положительный пользовательский опыт, а увеличение длительности разработки и потребления ресурсов вписываются в заложенный бюджет проекта.

## Последствия
* Необходимо спроектировать приложение notificator, включая API для взаимодействия с ним.
* При необходимости есть возможность повысить отказоустойчивость всей Системы в ситуациях, когда SMTP-сервер недоступен: реализовать механизм ретраев (повторных попыток отправить уведомление).
